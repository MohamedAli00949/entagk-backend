"use strict";(self.webpackChunkpomodoro_=self.webpackChunkpomodoro_||[]).push([[804],{2804:function(o,e,n){n.r(e),n.d(e,{default:function(){return m}});var i=n(885),t=n(2791),l=n(9434),c=n(601),u=n(7710),r=n(771),a=n(6409),d=n(184),s=(0,t.lazy)((function(){return n.e(178).then(n.bind(n,2178))})),v=(0,t.lazy)((function(){return Promise.all([n.e(578),n.e(23)]).then(n.bind(n,9023))})),f=new window.Worker("worker.js"),m=function(){var o,e,n,m,p,y=(0,l.v9)((function(o){return o.timer})),g=y.active,h=y.activites,k=y.setting,w=y.started,b=y.periodNum,T=y.restOfTime,N=(0,l.v9)((function(o){return o.tasks})).activeId,P=(0,t.useState)(null===T?0:T),j=(0,i.Z)(P,2),I=j[0],V=j[1],x=null===k||void 0===k?void 0:k.time[g],S=(0,l.I0)(),F=(0,t.useRef)("none"!==(null===k||void 0===k||null===(o=k.tickingType)||void 0===o?void 0:o.name)?(0,r.Z)({src:null===k||void 0===k||null===(e=k.tickingType)||void 0===e?void 0:e.src,volume:null===k||void 0===k?void 0:k.tickingVolume,loop:!0}):null),R=(0,t.useRef)((0,r.Z)({src:null===k||void 0===k||null===(n=k.alarmType)||void 0===n?void 0:n.src,volume:null===k||void 0===k?void 0:k.alarmVolume,loop:null===k||void 0===k?void 0:k.alarmRepet})),C=(0,t.useRef)("none"!==(null===k||void 0===k||null===(m=k.clickType)||void 0===m?void 0:m.name)?(0,r.Z)({src:null===k||void 0===k||null===(p=k.clickType)||void 0===p?void 0:p.src,volume:null===k||void 0===k?void 0:k.clickVolume}):null);(0,t.useEffect)((function(){var o,e,n,i,t;void 0!=typeof(null===(o=window)||void 0===o?void 0:o.Notification)&&("default"===(null===(e=window)||void 0===e||null===(n=e.Notification)||void 0===n?void 0:n.permission)&&(null===(i=window)||void 0===i||null===(t=i.Notification)||void 0===t||t.requestPermission()))}),[]),(0,t.useEffect)((function(){document.body.style.backgroundColor=h[g].color,void 0!==k.time&&V((null===k||void 0===k?void 0:k.time[g])-T)}),[g,k.time]),(0,t.useEffect)((function(){"none"!==(null===k||void 0===k?void 0:k.tickingType.name)&&(F.current.chengeVolume(null===k||void 0===k?void 0:k.tickingVolume),F.current.changeFile(null===k||void 0===k?void 0:k.tickingType.src)),R.current.chengeVolume(null===k||void 0===k?void 0:k.alarmVolume),R.current.changeFile(null===k||void 0===k?void 0:k.alarmType.src),R.current.changeLoop(null===k||void 0===k?void 0:k.alarmRepet),"none"!==k.clickType.name&&(C.current.chengeVolume(k.clickVolume),C.current.changeFile(k.clickType.src))}),[k]),(0,t.useEffect)((function(){(g!==c.aI&&k.autoBreaks||g===c.aI&&k.autoPomodors&&0!==b)&&setTimeout((function(){R.current.handleStop(),"none"!==k.tickingType.name&&F.current.handlePlay(),f.postMessage({started:!w,count:k.time[g]}),S({type:c.BG,data:0})}),1e4)}),[g,k.autoBreaks,k.autoPomodors]),(0,t.useEffect)((function(){w?(document.body.onbeforeunload=function(){return function(){return"Hello, world!"}},k.focusMode&&(document.body.style.backgroundColor="rgb(30 30 30)",document.body.style.overflow="hidden")):(document.body.onbeforeunload=null,k.focusMode&&(document.body.style.backgroundColor=h[g].color,document.body.style.overflow="auto"))}),[w]),f.onmessage=function(o){if("stop"!==o.data){var e,n,i;if(V(o.data),void 0!=typeof(null===(e=window)||void 0===e?void 0:e.Notification))"granted"===(null===(n=window)||void 0===n||null===(i=n.Notification)||void 0===i?void 0:i.permission)&&0!==I&&("every"===k.notificationType?I%(60*k.notificationInterval)===0&&I!==x&&(0,u.h)("".concat(I/60," minutes left!")):I-60*k.notificationInterval===0&&I!==x&&(0,u.h)("".concat(I/60," minutes left!")))}else{var t,l;if(S({type:c.pt,data:0}),R.current.handlePlay(),"none"!==k.tickingType.name&&F.current.handleStop(),void 0!=typeof(null===(t=window)||void 0===t?void 0:t.Notification))"granted"===(null===(l=window)||void 0===l?void 0:l.Notification.permission)&&(g===c.aI?(0,u.h)("It's time to take a break"):(0,u.h)("It's time to focus!"));S((0,c.P8)(g,N))}};var M=(0,t.useCallback)((function(){console.log("toggle start"),"none"!==k.clickType.name&&C.current.handlePlay(),R.current.handleStop(),w?(f.postMessage("stop"),"none"!==k.tickingType.name&&F.current.handleStop(),S({type:c.pt,data:k.time[g]-I})):("none"!==k.tickingType.name&&F.current.handlePlay(),f.postMessage({started:!w,count:I}),S({type:c.BG,data:0}))}),[w,I]),Z=function(){V(x),"none"!==k.clickType.name&&C.current.handlePlay()};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"clock-container",style:{background:h[g].timerBorder},children:(0,d.jsx)("div",{className:"clock",children:(0,d.jsx)(t.Suspense,{fallback:(0,d.jsx)(a.Z,{color:h[g].color,backgroud:"transparent",size:"200",strokeWidth:"2.5"}),children:"digital"===k.format?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(v,{handleReset:Z,toggleStart:M,setTime:V,time:I})}):(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(s,{handleReset:Z,toggleStart:M,setTime:V,time:I})})})})})})}},771:function(o,e){e.Z=function(o){var e=o.src,n=o.volume,i=void 0===n?50:n,t=o.loop,l=void 0!==t&&t,c=new Audio;c.src=e,c.volume=i/100,c.loop=l;return{handlePlay:function(){!c.paused&&c.currentTime||c.play().catch((function(){}))},handleStop:function(){c.pause()},chengeVolume:function(o){return c.volume=o/100},changeFile:function(o){c.pause(),c.src=o},changeLoop:function(o){c.loop=o}}}},7710:function(o,e,n){n.d(e,{h:function(){return t},m:function(){return i}});var i=function(o){var e=o%60,n=Math.floor(o/60);return"".concat(n>=10?n:"0"+n,":").concat(e>=10?e:"0"+e)},t=function(o){var e;void 0!==typeof(null===(e=window)||void 0===e?void 0:e.Notification)&&new window.Notification(o,{icon:"favicon.ico",tag:"mohamed ali",requireInteraction:!0,renotify:!0})}}}]);
//# sourceMappingURL=804.09189e1a.chunk.js.map